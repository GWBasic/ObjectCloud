{"Title":"Quickstart to Customize ObjectCloud","Contents":"\n<p>This page describes how we created a custom ObjectCloud instance for Andrew Rondeau, AppFeeds CTO. It builds on the <a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"/Docs/walkthrough.page\">ObjectCloud Walkthrough</a>.</p><h1>Setting up the ObjectCloud server</h1><p>We set up <a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"http://andrewrondeau.ath.cx\">http://andrewrondeau.ath.cx</a>&#160;with ObjectCloud.&#160;To set up an ObjectCloud server, we created an Ubuntu 10.04 VM at <a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"http://www.rackspacecloud.com/cloud_hosting_products/servers\">Rackspace Cloud</a>. We then built mono 2.6.4, downloaded ObjectCloud, followed the instructions in&#160;<a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"http://172.16.152.1:1080/Docs/public_internet.page\">Putting ObjectCloud on the public internet</a>,&#160;and configured initctl to start ObjectCloud upon bootup.</p><blockquote class=\"webkit-indent-blockquote\" style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><p><b>Sounds geeky?</b> <i>You can just run ObjectCloud on your desktop like described in the <a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"/Docs/walkthrough.page\">Walkthrough</a>. When you're ready for a server on the public internet, either enlist the help of a friendly nerd, or </i><a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"http://appfeeds.com\"><i>contact AppFeeds</i></a><i>&#160;for commercial support.</i></p></blockquote><p>We chose Rackspace Cloud because we can have experimental VMs inexpensively, and because Rackspace's VMs behave like a traditional server. If you use a cloud provider like Amazon, make sure you choose a VM template that allows you to place ObjectCloud in a folder where it can write to the disk.</p><p>Once&#160;<a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"http://andrewrondeau.ath.cx/\">http://andrewrondeau.ath.cx</a>&#160;was up and running, we changed the root password. &#160;</p><h1>Changing the Logo</h1><p>The first thing we did was create a logo. Because we didn't want to spend a lot of time with CSS, we made our logo 120 pixels tall, the same size as ObjectCloud's logo. We uploaded the logo to <a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"/DefaultTemplate\">/DefaultTemplate</a>.</p><p>After uploading the logo, we needed to put an &lt;img&gt; tag in our site's header. To do this, we edited&#160;<a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"http://172.16.152.1:1080/DefaultTemplate/headerfooter.ochf?Action=Edit\">/DefaultTemplate/headerfooter.ochf</a>. Headerfooter.ochf is the default look and feel that's applied to the entire site. In this page we&#160;removed the logo divs. The updated header:</p><blockquote class=\"webkit-indent-blockquote\" style=\"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 40px; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; \"><pre>&lt;div class=\"header\"&gt;\n   &lt;div class=\"maxwidth\"&gt;\n      &lt;a href=\"/\"&gt;\n         &lt;img src=\"/DefaultTemplate/logo.jpg\" /&gt;\n      &lt;/a&gt;\n      &lt;div id=\"account\"&gt;\n         &lt;div id=\"accountblock\" style=\"float: right\"&gt;\n            &lt;oc:component oc:src=\"login.occ\" /&gt;\n         &lt;/div&gt;\n      &lt;/div&gt;\n   &lt;/div&gt;\n\n   &lt;div class=\"staticmenu\"&gt;\n      &lt;!-- Place static links here --&gt;\n      &lt;a href=\"/Docs/about.page\"&gt;About&lt;/a&gt; - \n      &lt;a href=\"/Docs/tryit.page\"&gt;Try it!&lt;/a&gt; - \n      &lt;a href=\"/Docs/customize.page\"&gt;Customize&lt;/a&gt; - \n      &lt;a href=\"/Docs/developer.page\"&gt;Develop&lt;/a&gt; - \n      &lt;a href=\"/Docs/contact.page\"&gt;Contact&lt;/a&gt;\n   &lt;/div&gt;\n&lt;/div&gt;\n&lt;div style=\"clear: both\" /&gt;</pre></blockquote><p><img src=\"http://172.16.152.1:1080/Docs/customize%20walkthough/edit%20header.png\"/></p><blockquote class=\"webkit-indent-blockquote\" style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><p><b>Note</b>: <i>When editing </i><a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"/DefaultTemplate/headerfooter.ochf\"><i>/DefaultTemplate/headerfooter.ochf</i></a><i>, be careful to keep the &lt;div class=\"contents\"&gt;&lt;oc:component /&gt;&lt;/div&gt; tags. Without these tags, ObjectCloud will become confused when it tries to add your site's look and feel to different pages.</i></p></blockquote><p>We then <a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"/DefaultTemplate/default.css?Action=Edit\">edited default.css</a>&#160;so that the header will be black. We got rid of the .binarycloud and .logo classes, as they aren't needed with the new logo. We then updated the .header class to have a black background without images:</p><p>The new .header class:</p><blockquote class=\"webkit-indent-blockquote\" style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><pre>.header \n{\n   text-align: left;\n   width: 100%;\n   height: 120px;\n   color: #fff;\n   background: #000;\n}</pre></blockquote><p>We also had to edit div.staticmenu and #account so they would use a black background:</p><blockquote class=\"webkit-indent-blockquote\" style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><font class=\"Apple-style-span\" face=\"monospace\"><span class=\"Apple-style-span\" style=\"white-space: pre;\">#account \n{\n   float: right;\n   margin-right: 20px;\n   margin-top: 20px;\n   background: #000;\n   font-size: 0.75em;\n   text-align: right\n}</span></font>&#160;<pre>div.staticmenu\n{\n   position: absolute;\n   top: 60px;\n   left: 475px;\n   font-size: 1.25em;\n   background: #000;\n}</pre></blockquote><p><img src=\"/Docs/customize walkthough/edit css.png\"/></p><p>We then removed the \"binary cloud\" artwork from the side navbar by editing <a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"/DefaultTemplate/navbar.oc?Action=Edit\">/DefaultTemplate/navbar.oc</a>. To do this, we removed the &lt;pre class=\"navbinarycloud\"&gt; tags and their contents. While we were doing this, we removed the link to the \"Developer Controls\" page:</p><blockquote class=\"webkit-indent-blockquote\" style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><pre>&lt;oc:componentdef xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:oc=\"objectcloud_templating\"&gt;\n\n   &lt;div class=\"navbar\"&gt;\n\n      &lt;oc:if&gt;\n         &lt;oc:isloggedin&gt;\n            &lt;div class=\"navbarimage\"&gt;\n               &lt;a href=\"[_User.Identity_]\"&gt;\n                  &lt;img src=\"[_User.Identity_]?Method=GetAvatar&amp;amp;width=50\" /&gt;\n               &lt;/a&gt;\n            &lt;/div&gt;\n            &lt;span class=\"navbaruserlinks\"&gt;\n               &lt;a href=\"[_User.Identity_]\"&gt;\n                  [_User.Name_] (Profile)\n               &lt;/a&gt;&lt;br /&gt;\n               &lt;a href=\"/DefaultTemplate/usermanager.oc?Target=/Users/[_User.Name_].user\"&gt;Account&lt;/a&gt;\n            &lt;/span&gt;\n            &lt;hr style=\"clear: both\" /&gt;\n            &lt;oc:if&gt;\n               &lt;oc:islocal&gt;\n                  &lt;p&gt;&lt;a href=\"/Users/[_User.Name_]\"&gt;Files&lt;/a&gt;&lt;/p&gt;\n               &lt;/oc:islocal&gt;\n            &lt;/oc:if&gt;\n            &lt;p&gt;&lt;a href=\"/Shell/UserManagers/GroupManager.wchtml\"&gt;Groups&lt;/a&gt;&lt;/p&gt;\n         &lt;/oc:isloggedin&gt;\n      &lt;/oc:if&gt;\n   &lt;/div&gt;\n\n&lt;/oc:componentdef&gt;</pre></blockquote><p>The final page:</p><p><img src=\"/Docs/customize walkthough/final page.png\"/></p><p><span class=\"Apple-style-span\" style=\"font-size: 32px; font-weight: bold; \">Updating the Default Page</span></p><p>Our default page still broadcasts to the world that the default root password is \"root, \" even though&#160;the first thing we did when we set up the server was change the root password.</p><p>We got rid of this message by clicking on \"<a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"/index.oc?Action=Edit\">Edit this page</a>,\" and removing most of the content:</p><blockquote class=\"webkit-indent-blockquote\" style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><pre>&lt;oc:componentdef xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:oc=\"objectcloud_templating\" xmlns:af=\"appfeeds_templating\"&gt;\n   &lt;oc:inserthead&gt;\n      &lt;title&gt;Andrew Rondeau&lt;/title&gt;\n   &lt;/oc:inserthead&gt;\n\n   &lt;oc:component oc:src=\"/DefaultTemplate/particle.oc\" /&gt;\n\n&lt;/oc:componentdef&gt;</pre></blockquote><p>The result page now just shows the currently-logged-in user's notifications, or prompts the user to log in:</p><p>Logged in: (Red background is a security feature for when you are logged in as root)</p><p><img src=\"/Docs/customize walkthough/default page logged in.png\"/></p><p>Logged out:</p><p><img src=\"/Docs/customize walkthough/default page logged out.png\"/></p><h1>Adding Some Content</h1><p>The remaining part to customize are the links to default content. The header still links to ObjectCloud's documentation. We decided that Andrew Rondeau's personal site should link to something a bit more personal.</p><p>In the <a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"/?Action=View\">root directory</a>, we created two web pages, about.page and contact.page. We then shared these pages with everybody and authenticatedusers, but we only gave authenticatedusers permission to respond. This allows anybody to comment on these pages, provided that they've logged into the server through a local or OpenID account.</p><p><img src=\"/Docs/customize walkthough/sharing.png\"/></p><p>After editing these pages, we linked to them by editing the staticmenu div in <a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"/DefaultTemplate/headerfooter.ochf?Action=Edit\">/DefaultTemplate/headerfooter.ochf</a>.</p><blockquote class=\"webkit-indent-blockquote\" style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><pre>&lt;div class=\"staticmenu\"&gt;\n   &lt;!-- Place static links here --&gt;\n   &lt;a href=\"/about.page\"&gt;About&lt;/a&gt; - \n   &lt;a href=\"/contact.page\"&gt;Contact&lt;/a&gt;\n&lt;/div&gt;</pre></blockquote><p></p><p xmlns=\"http://www.w3.org/1999/xhtml\"><a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"http://andrewrondeau.ath.cx/about.page\">about.page</a></p><p xmlns=\"http://www.w3.org/1999/xhtml\"><a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"http://andrewrondeau.ath.cx/about.page\"><img src=\"/Docs/customize walkthough/about.png\"/></a></p><p xmlns=\"http://www.w3.org/1999/xhtml\"></p><a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"http://andrewrondeau.ath.cx/contact.page\"></a><p xmlns=\"http://www.w3.org/1999/xhtml\">contact.page</p><p xmlns=\"http://www.w3.org/1999/xhtml\"><img xmlns=\"http://www.w3.org/1999/xhtml\" src=\"/Docs/customize walkthough/contact.png\"/></p><h1>Finishing Up</h1><p>After completing the static pages, we're finished with Andrew's ObjectCloud site.</p><p>For help and questions, we suggest visiting the <a xmlns=\"http://www.w3.org/1999/xhtml\" href=\"/Docs/contact.page\">Contact Page</a>.</p><p xmlns=\"http://www.w3.org/1999/xhtml\"></p>"}